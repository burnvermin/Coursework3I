(function(){"use strict";var e={952:function(e,t,s){var o=s(963),n=s(252),r=s(577);const a={class:"container"},c={class:"sort"},i={key:0,class:"cart-btn",value:"add",disabled:""},u=(0,n._)("span",{class:"fas fa-cart-plus"},null,-1),l=(0,n._)("span",{class:"fas fa-cart-plus"},null,-1),d={key:0},h={key:1};function p(e,t,s,o,p,m){const f=(0,n.up)("Lesson"),b=(0,n.up)("Checkout");return(0,n.wg)(),(0,n.iD)("div",a,[(0,n._)("div",c,[0===p.cart.length&&!1!==p.showProduct?((0,n.wg)(),(0,n.iD)("button",i,[(0,n.Uk)(" Cart  "+(0,r.zw)(m.cartItemCount)+"  ",1),u])):((0,n.wg)(),(0,n.iD)("button",{key:1,class:"cart-btn",value:"add",onClick:t[0]||(t[0]=(...e)=>m.showCheckout&&m.showCheckout(...e))},[(0,n.Uk)(" Cart  "+(0,r.zw)(m.cartItemCount)+"  ",1),l]))]),p.showProduct?((0,n.wg)(),(0,n.iD)("div",d,[(0,n.Wm)(f,{Lessons:p.lessons,onLessonId:m.getLessonInfo,onCart:m.getCart},null,8,["Lessons","onLessonId","onCart"])])):((0,n.wg)(),(0,n.iD)("div",h,[(0,n.Wm)(b,{cart:p.cart,lessonInfo:p.lessonInfo},null,8,["cart","lessonInfo"])]))])}const m=e=>((0,n.dD)("data-v-44bd4d56"),e=e(),(0,n.Cn)(),e),f={class:"container"},b=m((()=>(0,n._)("div",{class:"bg"},null,-1))),v={class:"checkout"},w={class:"section1"},g=["src"],y={id:"spaces"},k=["onClick"],_={class:"submit"},C=m((()=>(0,n._)("label",{for:"name"},"Name:",-1))),I=m((()=>(0,n._)("label",{for:"phone-number"},"Phone Number:",-1)));function U(e,t,s,a,c,i){return(0,n.wg)(),(0,n.iD)("div",f,[b,(0,n._)("div",v,[(0,n._)("div",w,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.cart,(e=>((0,n.wg)(),(0,n.iD)("div",{key:e.id,class:"list"},[(0,n._)("img",{src:e.image,alt:"img",class:"image"},null,8,g),(0,n._)("h6",null,"Subject: "+(0,r.zw)(e.subject),1),(0,n._)("h6",null,"Location: "+(0,r.zw)(e.location),1),(0,n._)("h6",y,"numberPurchased: "+(0,r.zw)(e.numberPurchased),1),(0,n._)("h6",null,"Price: "+(0,r.zw)(e.price)+".00",1),(0,n._)("button",{class:"btn",onClick:t=>i.removeCourseFromCart(e)},"Remove",8,k)])))),128))]),(0,n._)("div",_,[C,(0,n.wy)((0,n._)("input",{type:"text",name:"name",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>c.checkout.Name=e)},null,512),[[o.nr,c.checkout.Name,void 0,{trim:!0}]]),I,(0,n.wy)((0,n._)("input",{type:"text",name:"phone-number",id:"phone-number","onUpdate:modelValue":t[1]||(t[1]=e=>c.checkout.Phone_No=e)},null,512),[[o.nr,c.checkout.Phone_No]]),(0,n._)("button",{type:"submit",class:"submitBtn",id:"btnSub",onClick:t[2]||(t[2]=(...e)=>i.isNumber&&i.isNumber(...e))},"Checkout")])])])}var P=s(669),L=s.n(P),D={props:{cart:[Array],lessonInfo:[Array]},data(){return{checkout:{Name:"",Phone_No:null,lessonId:[]},currentUserId:""}},created(){},computed:{},mounted:function(){this.getData(),this.checkout.lessonId=this.lessonInfo},methods:{async getData(){try{const e=await L().get("https://courseworktwo2.herokuapp.com/collection/Users/6232695c020473916b268f00");this.currentUserId=e.data}catch(e){console.log(e)}},removeCourseFromCart(e){this.cart.pop(e),e.numberPurchased--,this.checkout.lessonId.pop(e._id),this.checkout.lessonId.pop(e.numberPurchased),++e.spaces},async isNumber(){let e=document.getElementById("phone-number"),t=document.getElementById("name");document.querySelector(".submitBtn");var s=/^[0-9]+$/,o=/^[A-Za-z]+$/;return e.value.match(s)&&t.value.match(o)?(alert("Your Registration number has accepted...."),""!=this.checkout.Name&&null!=this.checkout.Phone_No&&(this.checkout.Name===this.currentUserId.Name?(await L().put("https://courseworktwo2.herokuapp.com/collection/Users/"+this.currentUserId._id,{body:this.checkout}),alert("Order Updated successfully!")):(console.log("posting"),await L().post("https://courseworktwo2.herokuapp.com/collection/Users/",{body:this.checkout}),alert("Order placed successfully!"))),window.location.href="/index.html",!0):(alert("Please input only numeric characters for Phone number and letters for Name"),!1)}}},j=s(744);const B=(0,j.Z)(D,[["render",U],["__scopeId","data-v-44bd4d56"]]);var N=B;const O=e=>((0,n.dD)("data-v-0975b22f"),e=e(),(0,n.Cn)(),e),A={class:"container"},S=O((()=>(0,n._)("div",{class:"bg"},null,-1))),z={class:"header"},V={class:"sort"},x=O((()=>(0,n._)("option",{value:"subject"},"Sort by Subject",-1))),T=O((()=>(0,n._)("option",{value:"location"},"Sort by Location",-1))),Z=O((()=>(0,n._)("option",{value:"price"},"Sort by Price",-1))),$=O((()=>(0,n._)("option",{value:"availability"},"Sort by Availability",-1))),E=[x,T,Z,$],F=O((()=>(0,n._)("option",{value:"ascending"},"Ascending",-1))),M=O((()=>(0,n._)("option",{value:"descending"},"Descending",-1))),Y=[F,M],q={action:"",class:"search"},H=O((()=>(0,n._)("hr",null,null,-1))),K={class:"section1"},R=["src"],W=O((()=>(0,n._)("strong",null,"Subject: ",-1))),G=O((()=>(0,n._)("strong",null,"Location: ",-1))),J=O((()=>(0,n._)("strong",null,"Price: ",-1))),Q=O((()=>(0,n._)("strong",null,"Available spaces: ",-1))),X=["onClick"],ee={key:1,disabled:"disabled"},te={key:2};function se(e,t,s,a,c,i){return(0,n.wg)(),(0,n.iD)("div",A,[S,(0,n._)("div",z,[(0,n._)("div",V,[(0,n.wy)((0,n._)("select",{name:"sortBy",id:"select","onUpdate:modelValue":t[0]||(t[0]=e=>c.sortBy=e)},E,512),[[o.bM,c.sortBy]]),(0,n.wy)((0,n._)("select",{name:"orderby",id:"orderBy","onUpdate:modelValue":t[1]||(t[1]=e=>c.orderBy=e)},Y,512),[[o.bM,c.orderBy]])]),(0,n._)("form",q,[(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>c.searchValue=e),placeholder:"Search for a lesson"},null,512),[[o.nr,c.searchValue]])]),H]),(0,n._)("div",null,[(0,n._)("div",K,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.sortLessons,(e=>((0,n.wg)(),(0,n.iD)("div",{key:e._id,class:"list"},[(0,n._)("img",{src:e.image,alt:"img",class:"image"},null,8,R),(0,n._)("p",null,[W,(0,n.Uk)((0,r.zw)(e.subject),1)]),(0,n._)("p",null,[G,(0,n.Uk)((0,r.zw)(e.location),1)]),(0,n._)("p",null,[J,(0,n.Uk)(" "+(0,r.zw)(e.price)+".00",1)]),(0,n._)("p",null,[Q,(0,n.Uk)((0,r.zw)(e.spaces),1)]),i.canAddToCart(e)?((0,n.wg)(),(0,n.iD)("button",{key:0,class:"btn",onClick:t=>i.addCourseToCart(e)},"Add to Cart",8,X)):((0,n.wg)(),(0,n.iD)("button",ee,"No more spaces in this class")),e.spacesAvailable===i.itemsInCart(e.id)?((0,n.wg)(),(0,n.iD)("span",te," Sold out! ")):(0,n.kq)("",!0)])))),128))])])])}var oe={props:{Lessons:[Array]},data(){return{sortBy:"subject",orderBy:"ascending",searchValue:"",userInfo:[],cart:[],lessonInfo:[],currentUserId:""}},mounted:function(){},methods:{addCourseToCart(e){e.spaces>0&&--e.spaces;for(var t=0;t<this.Lessons.length;t++)e.id==this.Lessons[t].id&&(e.numberPurchased++,this.cart.push(e),this.lessonInfo.push("id: "+e._id),this.lessonInfo.push("Space(s): "+e.numberPurchased),this.$emit("lessonId",this.lessonInfo),this.$emit("cart",this.cart))},canAddToCart(e){return e.availableInventory>this.itemsInCart(e)},itemsInCart(e){let t=0;for(let s=0;s<this.cart.length;s++)this.cart[s]===e&&t++;return t}},computed:{sortLessons(){let e=this.Lessons;return e=e.sort(((e,t)=>{if("subject"==this.sortBy){let s=e.subject.toLowerCase(),o=t.subject.toLowerCase();if(s<o)return-1;if(s>o)return 1}else if("location"==this.sortBy){let s=e.location.toLowerCase(),o=t.location.toLowerCase();if(s<o)return-1;if(s>o)return 1}return 0})),"price"==this.sortBy&&(e=e.sort(((e,t)=>e.price-t.price))),"availability"==this.sortBy&&(e=e.sort(((e,t)=>e.spaces-t.spaces))),"ascending"!==this.orderBy&&e.reverse(),""!=this.searchValue&&this.searchValue&&(e=e.filter((e=>e.subject.toUpperCase().includes(this.searchValue.toUpperCase())))),e}}};const ne=(0,j.Z)(oe,[["render",se],["__scopeId","data-v-0975b22f"]]);var re=ne,ae={name:"App",components:{Checkout:N,Lesson:re},data(){return{showProduct:!0,lessons:[],users:[],lessonInfo:[],cart:[]}},created(){this.getData(),this.getUsers()},computed:{cartItemCount:function(){return this.cart.length}},methods:{async getData(){try{const e=await L().get("https://courseworktwo2.herokuapp.com/collection/Lessons/");this.lessons=e.data}catch(e){console.log(e)}},async getUsers(){try{const e=await L().get("https://courseworktwo2.herokuapp.com/collection/Users/");this.users=e.data}catch(e){console.log(e)}},showCheckout(){this.showProduct=!this.showProduct},getCart(e){this.cart=e},getLessonInfo(e){this.lessonInfo=e}}};const ce=(0,j.Z)(ae,[["render",p]]);var ie=ce;(0,o.ri)(ie).mount("#app")}},t={};function s(o){var n=t[o];if(void 0!==n)return n.exports;var r=t[o]={exports:{}};return e[o](r,r.exports,s),r.exports}s.m=e,function(){var e=[];s.O=function(t,o,n,r){if(!o){var a=1/0;for(l=0;l<e.length;l++){o=e[l][0],n=e[l][1],r=e[l][2];for(var c=!0,i=0;i<o.length;i++)(!1&r||a>=r)&&Object.keys(s.O).every((function(e){return s.O[e](o[i])}))?o.splice(i--,1):(c=!1,r<a&&(a=r));if(c){e.splice(l--,1);var u=n();void 0!==u&&(t=u)}}return t}r=r||0;for(var l=e.length;l>0&&e[l-1][2]>r;l--)e[l]=e[l-1];e[l]=[o,n,r]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var o in t)s.o(t,o)&&!s.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,o){var n,r,a=o[0],c=o[1],i=o[2],u=0;if(a.some((function(t){return 0!==e[t]}))){for(n in c)s.o(c,n)&&(s.m[n]=c[n]);if(i)var l=i(s)}for(t&&t(o);u<a.length;u++)r=a[u],s.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return s.O(l)},o=self["webpackChunkcw3i"]=self["webpackChunkcw3i"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=s.O(void 0,[998],(function(){return s(952)}));o=s.O(o)})();
//# sourceMappingURL=app.4df60bbd.js.map